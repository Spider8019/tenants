<%- include("partials/header"); -%>
<%  var bg=""
if(!user.avatar.data) 
    {bg="background:linear-gradient(90deg,black,grey,black,rgba(0, 121, 255, 0.89),rgba(0, 0, 0, 0.712),transparent)"}
else 
    bg="background:linear-gradient(90deg,black,black,transparent),url('data:image/"+user.avatar.contentType+";base64,"+user.avatar.data.toString('base64')+"');"
%>
<div class="profile" style=<%= bg %> style="background-attachment:fixed;">
    <div class="profileDetailContent">
      <div class="profileLevel1">
        <div class="basicProfileDetail">
            <h1><%= user.name %></h1>
            <p><%=user.email %></p>
            <p>
                <%=user.phone %>
            </p>
        </div>
      </div>

     <% if(user.aboutu.length>=0){%>
            <div class="aboutuprofile">
                    <p><%- user.aboutu %></p>
            </div>
     <%}%>
    <div class="profileLevel2">
        <p>
            <b>Residence Address: </b><%=user.homeAddress %>
        </p>
        <p>
            <b>Date of birth: </b><%=user.dob.toISOString().slice(0,10) %>
        </p>
        <p><b>Gender: </b><%=user.gender %></p>
        <p><b>Religion: </b><%=user.religion %></p>
        <p>
            <b>Father's Name: </b><%=user.fatherName %>
        </p>
        <p>
            <b>Phone: </b><%=user.fatherPhone %>
        </p>
        <p>
            <b>Mother's Name: </b><%=user.motherName %>
        </p>
        <p>
            <b>Phone: </b><%=user.motherPhone %>
        </p>
    </div>
    <button class="link linkone" onclick="showUpdateForm()">Update Profile</button>

</div>
<!-- UPDATE PROFILE PAGE -->
<div class="updateProfileFormContainer">
    <button onclick='hideUpdateProfileFormContainer(this)'>+</button>
    <form method="POST"action="/profile/update" enctype="multipart/form-data">
      <div>
          <textarea name="aboutu"></textarea>
      </div>
      <input type="file" name="avatar" accept="image/*">
      <input type="Submit" value="Update">
    </form>
</div>
</div>

<script>
    function hideUpdateProfileFormContainer(THIS){
        THIS.parentElement.style.display="none"
    }
    function showUpdateForm(){
        document.querySelector(".updateProfileFormContainer").style.display="grid"
    }
</script>
</body>
</html>